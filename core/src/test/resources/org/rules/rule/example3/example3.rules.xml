<rules>
    <rule name="Connection">
        <requires name="driverClassName"/>
        <requires name="url"/>
        <requires name="username"/>
        <requires name="password"/>

        <provides name="connection"/>

        <run>
        <![CDATA[
            def connection = [
                'driverClassName': r0,
                'url': r1,
                'username': r2,
                'password': r3
            ]
            return ['connection':connection]
        ]]>
        </run>
    </rule>

    <rule name="Oracle" tags="dbType=repo,type=cons">
        <requires name="oracle.server"/>
        <requires name="oracle.port"/>
        <requires name="oracle.sid"/>
        <requires name="oracle.username"/>
        <requires name="oracle.password"/>

        <provides name="url">'jdbc:oracle:thin:@' + r0 + ':' + r1 + ':' + r2</provides>
        <provides name="driverClassName">'oracle.jdbc.driver.OracleDriver'</provides>
        <provides name="username">r3</provides>
        <provides name="password">r4</provides>
    </rule>

    <factory name="Factory">
        <rule name="Version1">
            <provides name="version">'V1'</provides>
        </rule>

        <rule name="Version2">
            <provides name="version">'V2'</provides>
        </rule>

        <create>
        <![CDATA[
            return ui.choose('Choose', 'Version', ['Version1','Version2']);
        ]]>
        </create>
    </factory>
</rules>

